{
  "action": "created",
  "issue": {
    "url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/154",
    "repository_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming",
    "labels_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/154/labels{/name}",
    "comments_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/154/comments",
    "events_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/154/events",
    "html_url": "https://github.com/w3ctag/design-reviews-private-brainstorming/issues/154",
    "id": 3071899148,
    "node_id": "I_kwDOMs-qqM63GXYM",
    "number": 154,
    "title": "Canvas Text Metrics for Editing, Art and Design",
    "user": {
      "login": "jyasskin",
      "id": 83420,
      "node_id": "MDQ6VXNlcjgzNDIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/83420?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jyasskin",
      "html_url": "https://github.com/jyasskin",
      "followers_url": "https://api.github.com/users/jyasskin/followers",
      "following_url": "https://api.github.com/users/jyasskin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jyasskin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jyasskin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jyasskin/subscriptions",
      "organizations_url": "https://api.github.com/users/jyasskin/orgs",
      "repos_url": "https://api.github.com/users/jyasskin/repos",
      "events_url": "https://api.github.com/users/jyasskin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jyasskin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [

    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2025-05-18T16:17:07Z",
    "updated_at": "2025-05-29T23:06:05Z",
    "closed_at": null,
    "author_association": "COLLABORATOR",
    "type": null,
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "body": "Mirrored from: w3ctag/design-reviews#1095\n\nこんにちは TAG-さん!\n\nI'm requesting a TAG review of Additional Canvas TextMetrics features.\n\nWeb content developers often request improvements to canvas text support to enable richer text rendering and interaction. For rendering text there is a desire to perform per-glyph styling and rendering, where a glyph is the smallest unit of text. For editing, developers need better support for selection and caret position. Broadly speaking, developers would like editing capabilities similar to DOM content, and rendering capabilities similar to SVG text.\n\n  - Explainer¹: https://github.com/Igalia/explainers/blob/main/canvas-formatted-text/text-metrics-additions.md\n  - Specification: https://github.com/whatwg/html/pull/11000\n  - WPT Tests: html/canvas/[element|offscreen]/text...\n    * 2d.text.measure.index-from-offset*\n    * 2d.text.measure.selection-rects*\n    * 2d.text.measure.text-clusters*\n  - Security and Privacy self-review²: https://docs.google.com/document/d/1YarKhEHqpvVJmzYkm_TzXmP-QGkmHo_G4mQtmPSb3m8/edit?usp=sharing\n  - GitHub repo: https://github.com/whatwg/html/issues/10677\n  - Primary contacts:\n      - Stephen Chenney (@schenney-chromium), Igalia\n      - Florin Malita, Google\n  - Organization/project driving the specification: Google and Igalia\n  - This work is being funded by: Google and Igalia\n  - Primary standards group developing this feature: WHATWG\n  - Incubation and standards groups that have discussed the design:\n    - WHATWG - 11/21/24 [WHATNOT Meeting Notes](https://docs.google.com/document/d/1iaarr4Ho715CUULrvi_LD3TwshAcN2odDLBBEK0FjH0/edit?usp=sharing)  Limited visibility beyond our control. The issue of internationalization has been resolved already with the addition of a `lang` attribute to HTML canvas contexts.\n  - Multi-stakeholder support³:\n    - Chromium comments: Positive, https://chromestatus.com/feature/5075532483657728\n    - Mozilla comments: https://github.com/mozilla/standards-positions/issues/1144\n    - WebKit comments: https://github.com/WebKit/standards-positions/issues/436\n  - Major unresolved issues with or opposition to this specification: Open discussion of the Text Clusters API, see https://github.com/whatwg/html/issues/10677 and https://github.com/whatwg/html/issues/11141\n  - Status/issue trackers for implementations⁴: [Chromium](https://issues.chromium.org/issues/341213359)\n\nFurther details:\n\n  - [X] I have reviewed the TAG's [Web Platform Design Principles](https://www.w3.org/TR/design-principles/)\n\nYou should also know that...\n\nOur primary concerns is getting TAG feedback on the Text Clusters feature for querying and rendering per-glyph text information.\n",
    "reactions": {
      "url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/154/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/154/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  "comment": {
    "url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/comments/2920775984",
    "html_url": "https://github.com/w3ctag/design-reviews-private-brainstorming/issues/154#issuecomment-2920775984",
    "issue_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/154",
    "id": 2920775984,
    "node_id": "IC_kwDOMs-qqM6uF4Ew",
    "user": {
      "login": "jyasskin",
      "id": 83420,
      "node_id": "MDQ6VXNlcjgzNDIw",
      "avatar_url": "https://avatars.githubusercontent.com/u/83420?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jyasskin",
      "html_url": "https://github.com/jyasskin",
      "followers_url": "https://api.github.com/users/jyasskin/followers",
      "following_url": "https://api.github.com/users/jyasskin/following{/other_user}",
      "gists_url": "https://api.github.com/users/jyasskin/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jyasskin/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jyasskin/subscriptions",
      "organizations_url": "https://api.github.com/users/jyasskin/orgs",
      "repos_url": "https://api.github.com/users/jyasskin/repos",
      "events_url": "https://api.github.com/users/jyasskin/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jyasskin/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "created_at": "2025-05-29T23:06:04Z",
    "updated_at": "2025-05-29T23:06:04Z",
    "author_association": "MEMBER",
    "body": "On the 'Colors are fine' bug, I think several things are going on:\n* They pass `end`=`text.length`, which is the number of code _units_, but the [algorithm](https://whatpr.org/html/11000/canvas.html#dom-textcluster-start) throws an exception if it exceeds the number of code _points_. Since the emoji each take 2 code units to represent a code point, this should throw. ([`Intl.Segmenter`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Segmenter/segment/Segments/containing) operates in terms of code units, and they should be consistent with that here.\n* the \"<space><emoji><space>\" sequences are 4 code units, so if the implementation is actually in terms of code units, those occupy a full color cycle. Color emoji can't be re-colored, so you're not seeing the effect of the `ctx.fillStyle` value.\n* \"fi\" is a ligature, and I suspect that counts as \"their corresponding glyphs cannot be broken down any further\". But since it's 2 code units, we skip \"i\"'s color, which is red. Note that they refer to these TextClusters as \"grapheme clusters\" in a couple places, but [\"Grapheme clusters are not the same as ligatures.\"](https://unicode.org/reports/tr29/#:~:text=Grapheme%20clusters%20are%20not%20the%20same%20as%20ligatures.)\n\nThey should get a review from the internationalization group, to catch anything else like this that we'd miss.\n\n----\n\nI'm concerned about making it easier to draw the appearance of text onto a `<canvas>` without providing an accessible equivalent. Should we also ask them to get an APA review?\n\n----\n\nI don't see why `align` and `baseline` are exposed in `TextCluster`. https://whatpr.org/html/11000/canvas.html#dom-textcluster-align says they're just copied from the `getTextClusters()` input.",
    "reactions": {
      "url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/comments/2920775984/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "performed_via_github_app": null
  },
  "repository": {
    "id": 852470440,
    "node_id": "R_kgDOMs-qqA",
    "name": "design-reviews-private-brainstorming",
    "full_name": "w3ctag/design-reviews-private-brainstorming",
    "private": true,
    "owner": {
      "login": "w3ctag",
      "id": 3874462,
      "node_id": "MDEyOk9yZ2FuaXphdGlvbjM4NzQ0NjI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3874462?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/w3ctag",
      "html_url": "https://github.com/w3ctag",
      "followers_url": "https://api.github.com/users/w3ctag/followers",
      "following_url": "https://api.github.com/users/w3ctag/following{/other_user}",
      "gists_url": "https://api.github.com/users/w3ctag/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/w3ctag/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/w3ctag/subscriptions",
      "organizations_url": "https://api.github.com/users/w3ctag/orgs",
      "repos_url": "https://api.github.com/users/w3ctag/repos",
      "events_url": "https://api.github.com/users/w3ctag/events{/privacy}",
      "received_events_url": "https://api.github.com/users/w3ctag/received_events",
      "type": "Organization",
      "user_view_type": "public",
      "site_admin": false
    },
    "html_url": "https://github.com/w3ctag/design-reviews-private-brainstorming",
    "description": "For discussing review comments before we post them publicly",
    "fork": false,
    "url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming",
    "forks_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/forks",
    "keys_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/keys{/key_id}",
    "collaborators_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/collaborators{/collaborator}",
    "teams_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/teams",
    "hooks_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/hooks",
    "issue_events_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/events{/number}",
    "events_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/events",
    "assignees_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/assignees{/user}",
    "branches_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/branches{/branch}",
    "tags_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/tags",
    "blobs_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/git/blobs{/sha}",
    "git_tags_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/git/tags{/sha}",
    "git_refs_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/git/refs{/sha}",
    "trees_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/git/trees{/sha}",
    "statuses_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/statuses/{sha}",
    "languages_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/languages",
    "stargazers_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/stargazers",
    "contributors_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/contributors",
    "subscribers_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/subscribers",
    "subscription_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/subscription",
    "commits_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/commits{/sha}",
    "git_commits_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/git/commits{/sha}",
    "comments_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/comments{/number}",
    "issue_comment_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues/comments{/number}",
    "contents_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/contents/{+path}",
    "compare_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/compare/{base}...{head}",
    "merges_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/merges",
    "archive_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/{archive_format}{/ref}",
    "downloads_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/downloads",
    "issues_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/issues{/number}",
    "pulls_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/pulls{/number}",
    "milestones_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/milestones{/number}",
    "notifications_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/notifications{?since,all,participating}",
    "labels_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/labels{/name}",
    "releases_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/releases{/id}",
    "deployments_url": "https://api.github.com/repos/w3ctag/design-reviews-private-brainstorming/deployments",
    "created_at": "2024-09-04T21:34:13Z",
    "updated_at": "2024-09-04T21:34:17Z",
    "pushed_at": "2024-09-04T21:34:14Z",
    "git_url": "git://github.com/w3ctag/design-reviews-private-brainstorming.git",
    "ssh_url": "git@github.com:w3ctag/design-reviews-private-brainstorming.git",
    "clone_url": "https://github.com/w3ctag/design-reviews-private-brainstorming.git",
    "svn_url": "https://github.com/w3ctag/design-reviews-private-brainstorming",
    "homepage": null,
    "size": 0,
    "stargazers_count": 0,
    "watchers_count": 0,
    "language": null,
    "has_issues": true,
    "has_projects": true,
    "has_downloads": true,
    "has_wiki": false,
    "has_pages": false,
    "has_discussions": false,
    "forks_count": 0,
    "mirror_url": null,
    "archived": false,
    "disabled": false,
    "open_issues_count": 51,
    "license": null,
    "allow_forking": false,
    "is_template": false,
    "web_commit_signoff_required": false,
    "topics": [

    ],
    "visibility": "private",
    "forks": 0,
    "open_issues": 51,
    "watchers": 0,
    "default_branch": "main",
    "custom_properties": {

    }
  },
  "organization": {
    "login": "w3ctag",
    "id": 3874462,
    "node_id": "MDEyOk9yZ2FuaXphdGlvbjM4NzQ0NjI=",
    "url": "https://api.github.com/orgs/w3ctag",
    "repos_url": "https://api.github.com/orgs/w3ctag/repos",
    "events_url": "https://api.github.com/orgs/w3ctag/events",
    "hooks_url": "https://api.github.com/orgs/w3ctag/hooks",
    "issues_url": "https://api.github.com/orgs/w3ctag/issues",
    "members_url": "https://api.github.com/orgs/w3ctag/members{/member}",
    "public_members_url": "https://api.github.com/orgs/w3ctag/public_members{/member}",
    "avatar_url": "https://avatars.githubusercontent.com/u/3874462?v=4",
    "description": "The TAG  is a special working group within the @w3c, chartered (under the W3C Process Document) with stewardship of the web architecture."
  },
  "sender": {
    "login": "jyasskin",
    "id": 83420,
    "node_id": "MDQ6VXNlcjgzNDIw",
    "avatar_url": "https://avatars.githubusercontent.com/u/83420?v=4",
    "gravatar_id": "",
    "url": "https://api.github.com/users/jyasskin",
    "html_url": "https://github.com/jyasskin",
    "followers_url": "https://api.github.com/users/jyasskin/followers",
    "following_url": "https://api.github.com/users/jyasskin/following{/other_user}",
    "gists_url": "https://api.github.com/users/jyasskin/gists{/gist_id}",
    "starred_url": "https://api.github.com/users/jyasskin/starred{/owner}{/repo}",
    "subscriptions_url": "https://api.github.com/users/jyasskin/subscriptions",
    "organizations_url": "https://api.github.com/users/jyasskin/orgs",
    "repos_url": "https://api.github.com/users/jyasskin/repos",
    "events_url": "https://api.github.com/users/jyasskin/events{/privacy}",
    "received_events_url": "https://api.github.com/users/jyasskin/received_events",
    "type": "User",
    "user_view_type": "public",
    "site_admin": false
  },
  "installation": {
    "id": 55499709,
    "node_id": "MDIzOkludGVncmF0aW9uSW5zdGFsbGF0aW9uNTU0OTk3MDk="
  }
}
